"use strict";(self.webpackChunkbackbook=self.webpackChunkbackbook||[]).push([[178],{6900:function(e,t,s){s.d(t,{Z:function(){return Te}});var n=s(4942),a=s(1413),r=s(885),c=s(2791),i=s(2951),o=s(6431),l=s.n(o),u=s(6709),d=s(3466),m=s(4457),p=s(6821),h=s(2483),_=s(9571),f="ReactsPopup_popup__qaDrK",x="ReactsPopup_react__seMKA",v=s(184),j=[{name:"like",image:"../../../reacts/like.gif"},{name:"love",image:"../../../reacts/love.gif"},{name:"haha",image:"../../../reacts/haha.gif"},{name:"wow",image:"../../../reacts/wow.gif"},{name:"sad",image:"../../../reacts/sad.gif"},{name:"angry",image:"../../../reacts/angry.gif"}];function g(e){var t=e.handleMouseEnter,s=e.handleMouseLeave,n=e.reactHandler,a=e.setShowReact,r=e.showReact,i=(0,c.useRef)();return(0,_.Z)(i,r,(function(){a(!1)})),(0,v.jsx)("div",{ref:i,className:f,onMouseEnter:t,onMouseLeave:s,children:j.map((function(e,t){return(0,v.jsx)("div",{className:x,onClick:function(){return n(e.name)},children:(0,v.jsx)("img",{src:e.image,alt:e.name})},t)}))})}var Z=s(8272),N=s(4165),C=s(5861),y="CreateComment_wrap__KwizS",w="CreateComment_left__d9HUs",k="CreateComment_right__ibzYR",P="CreateComment_input__R-mDz",S="CreateComment_emoji_picker__UQ1yc",b="CreateComment_emoji_wrap__Uut7h",R="CreateComment_camera__OlZ3T",D="CreateComment_emoji__rQ2ej",L="CreateComment_img_perview__hOZWA",F="CreateComment_exit__tTWlr",T=s(833),E=s(3418),M=s(2388),K=function(){var e=(0,C.Z)((0,N.Z)().mark((function e(t){var s,n,a,r,c,i,o;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.form,n=t.post,a=t.type,r="".concat("http://127.0.0.1:4000","/api/v1/posts/AddComment/").concat(n),c="".concat("http://127.0.0.1:4000","/api/v1/posts/comments/").concat(n,"/reply"),e.next=5,M.Z.post("reply"===a?c:r,s,{withCredentials:!0});case 5:return i=e.sent,o=i.data,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=s(1656),O=s(9434),z=s(5218);var A=function(e){var t=e.commentRef,s=e.post,n=e.commentCountHandler,i=e.setLastCommentData,o=e.placholdertxt,l=e.type,u=e.setReplies,d=e.setCount,m=(0,O.v9)((function(e){return(0,a.Z)({},e.user.userinfo)})),p=(0,c.useState)(null),f=(0,r.Z)(p,2),x=f[0],j=f[1],g=(0,c.useState)(null),M=(0,r.Z)(g,2),A=M[0],I=M[1],q=(0,c.useState)(!1),H=(0,r.Z)(q,2),V=H[0],W=H[1],Y=(0,c.useState)(""),X=(0,r.Z)(Y,2),B=X[0],G=X[1],Q=(0,c.useState)(),J=(0,r.Z)(Q,2),$=(J[0],J[1]),ee=(0,c.useState)(""),te=(0,r.Z)(ee,2),se=te[0],ne=te[1],ae=(0,c.useRef)(),re=(0,c.useRef)(null);(0,_.Z)(ae,V,(function(){W(!1)}));var ce=(0,Z.D)(x,A,{placement:"top",modifiers:[{name:"offset",options:{offset:[0,10]}}]}),ie=ce.styles,oe=ce.attributes,le=(0,E.D)({mutationKey:"useComment",mutationFn:K}),ue=le.mutate,de=le.data,me=le.isSuccess,pe=le.isLoading,he=le.isError,_e=le.error,fe=function(){var e=(0,C.Z)((0,N.Z)().mark((function e(t){var n,a;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=new FormData,!B){e.next=7;break}return e.next=5,fetch(B).then((function(e){return e.blob()}));case 5:a=e.sent,n.append("photo",a);case 7:n.append("text",se),ue({form:n,post:s,type:l});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){"success"===(null===de||void 0===de?void 0:de.status)&&(G(""),ne(""),"reply"===l?(u(de.data.replies),d(de.data.replies.length)):(i(de.data.commendData),n(de.data.commentsCount)))}),[de,me]),(0,c.useEffect)((function(){var e;he&&z.ZP.error((null===_e||void 0===_e||null===(e=_e.response)||void 0===e?void 0:e.data.message)||"Something went wrong")}),[he]),(0,v.jsxs)(U.Z,{loading:pe,type:2,children:[(0,v.jsxs)("div",{className:y,children:[(0,v.jsx)("div",{className:w,children:(0,v.jsx)("img",{src:m.photo,alt:""})}),(0,v.jsxs)("div",{className:k,children:[(0,v.jsx)("div",{id:"CreateComment",className:P,children:(0,v.jsxs)("form",{className:P,onSubmit:fe,children:[(0,v.jsx)("input",{type:"file",hidden:!0,ref:re,accept:"image/jpeg,image/png,image/gif,image/webp",onChange:function(e){var t=e.target.files[0];if(("image/jpeg"===t.type||"image/png"===t.type||"image/webp"===t.type||"image/gif"===t.type)&&!(t.size>5242880)){var s=new FileReader;s.readAsDataURL(t),s.onload=function(e){G(e.target.result)}}}}),(0,v.jsx)("input",{placeholder:o,type:"text",ref:t,onChange:function(e){ne(e.target.value)},value:se})]})}),(0,v.jsxs)("div",{className:b,children:[V?(0,v.jsx)(h.Z,{id:"CreateComment",children:(0,v.jsx)("div",(0,a.Z)((0,a.Z)({className:S,ref:I,style:ie.popper},oe.popper),{},{children:(0,v.jsx)("div",{ref:ae,children:(0,v.jsx)(T.ZP,{width:300,height:300,lazyLoadEmojis:!0,onEmojiClick:function(e){e.e;var s=e.emoji,n=t.current;n.focus();var a=se.substring(0,n.selectionStart),r=se.substring(n.selectionStart);ne(a+s+r),$(a.length+s.length)},previewConfig:{showPreview:!1},searchDisabled:!0})})}))}):"",(0,v.jsx)("div",{className:R,onClick:function(){return re.current.click()},children:(0,v.jsx)("i",{className:"camera_icon"})}),(0,v.jsx)("div",{className:D,onClick:function(){W((function(e){return!e}))},ref:j,children:(0,v.jsx)("i",{className:"emoji_icon_large"})})]})]})]}),B&&(0,v.jsxs)("div",{className:L,children:[(0,v.jsx)("img",{src:B,alt:""}),(0,v.jsx)("div",{className:F,onClick:function(){return G("")},children:(0,v.jsx)("i",{className:"exit_icon"})})]})]})},I=s(4050),q=function(){var e=(0,C.Z)((0,N.Z)().mark((function e(t){var s,n,a;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.post,e.next=3,M.Z.put("".concat("http://127.0.0.1:4000","/api/v1/posts/").concat(s),{},{withCredentials:!0});case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function H(e){var t=e.icon,s=e.title,n=e.subtitle,a=e.img;return(0,v.jsxs)("li",{className:"hover1",children:[a?(0,v.jsx)("img",{src:a,alt:""}):(0,v.jsx)("i",{className:t}),(0,v.jsxs)("div",{className:i.Z.post_menu_text,children:[(0,v.jsx)("span",{children:s}),n&&(0,v.jsx)("span",{className:i.Z.menu_post_col,children:n})]})]})}var V=s(4802),W=s(4373),Y=s(8029);var X=function(e){var t=e.showMenu,s=e.setShowMenu,n=e.post,a=e.user,r=e.postRef,o=(0,c.useRef)(),l=n.user._id===a._id,u=function(e){return(0,E.D)({mutationKey:["useDeletePost",e],mutationFn:q})}(n._id),m=u.data,p=u.mutate,h=function(){var e=(0,C.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.images.foreach((function(e){var t=e.split("/").pop();(0,V.saveAs)(e,t)})),s(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){"success"===(null===m||void 0===m?void 0:m.status)&&(z.ZP.success("Successfully removed!"),r.current.remove())}),[m,r]),(0,_.Z)(o,t,(function(){s(!1)}));var f="".concat(window.location.origin,"/").concat(n.user.username,"/posts/").concat(n._id);return(0,v.jsx)(d.Z,{className:i.Z.menu,innerRef:o,children:(0,v.jsxs)("ul",{children:[(0,v.jsx)(Y.CopyToClipboard,{text:f,onCopy:function(){z.ZP.success("Successfully Copied!"),s(!1)},children:(0,v.jsxs)("li",{className:"hover1",children:[(0,v.jsx)(W.$PT,{size:22}),(0,v.jsxs)("div",{className:i.Z.post_menu_text,children:[(0,v.jsx)("span",{children:"Copy post link"}),(0,v.jsx)("span",{className:i.Z.menu_post_col,children:"Copy post link to clipboard"})]})]})}),(0,v.jsx)(H,{icon:"save_icon",title:"Save Post",subtitle:"Add this to your saved items."}),n.images.length>0&&(0,v.jsx)("div",{onClick:function(){return h()},children:(0,v.jsx)(H,{icon:"download_icon",title:"Download"})}),l&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"line"}),(0,v.jsx)("div",{onClick:function(){p({post:n._id})},children:(0,v.jsx)(H,{icon:"trash_icon",title:"Move to trash",subtitle:"items in your trash are deleted after 30 days"})})]})]})})},B=s(1087),G=function(){var e=(0,C.Z)((0,N.Z)().mark((function e(t){var s,n,a,r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.post,n=t.type,e.next=3,M.Z.put("".concat("http://127.0.0.1:4000","/api/v1/posts/").concat(s,"/reacts"),{type:n},{withCredentials:!0});case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=s(2982),J=s(7858),$="Comments_comments_wrap__Vbu7c",ee="Comments_info_wrap__inN-o",te="Comments_left__YTcxK",se="Comments_comment_info__zoFwd",ne="Comments_user__9H3C4",ae="Comments_comment_info_footer__dnDqX",re="Comments_view_more__KvWcT",ce="Comments_c_time__20-sc",ie="Comments_img_info__OeFO2",oe="Comments_text__X8Hxc",le="Comments_right__YKHDk",ue="Comments_liked__9o2qN",de="Comments_comment_likes__8NGRx",me="Comments_comment__kgksm",pe="Comments_tree__3Gmg1",he="Comments_tree_line__N9KDk",_e="Comments_comment_user_wrap__ayIJ8",fe="Comments_replies_wrap__yiHp8",xe=function(){var e=(0,C.Z)((0,N.Z)().mark((function e(t){var s,n,a;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.comment,e.next=3,M.Z.put("".concat("http://127.0.0.1:4000","/api/v1/posts/comments/").concat(s,"/like"),{},{withCredentials:!0});case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=s(71);var je=function(e){var t,s=e.comment,n=(0,O.v9)((function(e){return(0,a.Z)({},e.user.userinfo)})),i=(0,c.useState)(!1),o=(0,r.Z)(i,2),u=o[0],d=o[1],m=(0,c.useState)(s.replies),p=(0,r.Z)(m,2),h=p[0],_=p[1],f=(0,c.useState)(s.likes),x=(0,r.Z)(f,2),j=x[0],g=x[1],Z=(0,c.useState)(0),N=(0,r.Z)(Z,2),C=N[0],y=N[1],w=(0,c.useState)(0),k=(0,r.Z)(w,2),P=k[0],S=k[1],b=(0,c.useRef)(),R=(0,c.useRef)(),D=function(e){return(0,E.D)({mutationKey:["useCommentLike",e],mutationFn:xe})}(s._id),L=D.isSuccess,F=D.data,T=D.mutate,M=j.includes(n._id),K=j.length;return(0,c.useEffect)((function(){"success"===(null===F||void 0===F?void 0:F.status)&&g(F.data.likes)}),[L,F]),(0,c.useEffect)((function(){setTimeout((function(){S(R.current.clientHeight)}),50)}),[h,C]),(0,v.jsxs)("div",{className:"".concat(ee," ").concat(me),children:[(0,v.jsx)("div",{className:"".concat(te," ").concat(_e),ref:R,children:(0,v.jsx)("img",{src:s.user.photo,alt:""})}),(0,v.jsxs)("div",{className:le,children:[(0,v.jsxs)("div",{className:se,children:[(0,v.jsxs)(B.rU,{to:"/profile/".concat(s.user.username),className:ne,children:["".concat(s.user.first_name," ").concat(s.user.last_name),(null===(t=s.user)||void 0===t?void 0:t.confirmed)&&(0,v.jsx)("i",{style:{marginLeft:"5px"},className:"confirmed_comment_icon"})]}),(0,v.jsx)("div",{className:oe,children:s.text}),s.photo&&(0,v.jsx)("div",{className:ie,children:(0,v.jsx)("img",{src:s.photo,alt:s.text})}),K>0&&(0,v.jsxs)("div",{className:de,children:[(0,v.jsx)("img",{src:"../../../reacts/like.svg",alt:""}),(0,v.jsx)("p",{children:K})]})]}),(0,v.jsxs)("div",{className:ae,children:[(0,v.jsx)("p",{className:M?ue:"",onClick:function(){g(M?j.filter((function(e){return e!==n._id})):[].concat((0,Q.Z)(j),[n._id])),T({comment:s._id})},children:"Like"}),(0,v.jsx)("p",{onClick:function(){d(!0),setTimeout((function(){b.current.focus()}),50)},children:"Reply"}),(0,v.jsx)(l(),{fromNow:!0,interval:30,className:ce,children:s.createdAt})]}),(0,v.jsxs)("div",{className:fe,children:[h.slice(0,C).map((function(e,t,s){var n,a=s.length;return(0,v.jsxs)("div",{className:ee,children:[(0,v.jsx)("div",{className:te,children:(0,v.jsx)("img",{src:e.user.photo,alt:""})}),(0,v.jsxs)("div",{className:le,children:[(0,v.jsxs)("div",{className:se,children:[(0,v.jsxs)(B.rU,{to:"/profile/".concat(e.user.username),className:ne,children:["".concat(e.user.first_name," ").concat(e.user.last_name)," ",(null===(n=e.user)||void 0===n?void 0:n.confirmed)&&(0,v.jsx)("i",{style:{marginLeft:"5px"},className:"confirmed_comment_icon"})]}),(0,v.jsx)("div",{className:oe,children:e.text}),e.photo&&(0,v.jsx)("div",{className:ie,children:(0,v.jsx)("img",{src:e.photo,alt:e.text})})]}),(0,v.jsxs)("div",{className:ae,children:[(0,v.jsx)("p",{onClick:function(){d(!0),setTimeout((function(){b.current.focus()}),50)},children:"Reply"}),(0,v.jsx)(l(),{fromNow:!0,interval:30,className:ce,children:e.createdAt})]})]}),(0,v.jsx)("div",{className:pe,children:t+1===a&&(0,v.jsx)("div",{style:{height:"calc(".concat(P,"px )")},className:he,children:" "})})]},e._id)})),h.length>C&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:re,onClick:function(){y((function(e){return e+3})),d(!0)},children:0===C?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ve.qQ5,{})," ".concat(h.length," ").concat(1===h.length?"reply":"replies")]}):"( ".concat(h.length-C," ) replies View more replies")})})]}),u&&(0,v.jsx)(A,{placholdertxt:"@".concat(s.user.first_name," ").concat(s.user.last_name," reply ..."),commentRef:b,type:"reply",setReplies:_,setCount:y,post:s._id})]})]})};var ge=function(e){var t=e.lastComment,s=e.commentsCount,n=e.postID,a=e.lastCommentData,i=e.commentRef,o=(0,c.useState)([]),l=(0,r.Z)(o,2),u=l[0],d=l[1],m=function(){var e=(0,C.Z)((0,N.Z)().mark((function e(t){var s,a,r,c;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.pageParam,a=void 0===s?1:s,e.next=3,M.Z.get("".concat("http://127.0.0.1:4000","/api/v1/posts/comments/").concat(n,"?limit=4&page=").concat(a,"&sort=-createdAt"),{withCredentials:!0});case 3:return r=e.sent,c=r.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=(0,J.N)({queryKey:["comments",n],queryFn:m,getNextPageParam:function(e,t){return e.datalength<4?void 0:t.length+1},onSuccess:function(e){var t=e.pages[e.pages.length-1].data.comments;1===e.pages.length?d((0,Q.Z)(t)):d((function(e){return[].concat((0,Q.Z)(e),(0,Q.Z)(t))}))},enabled:!1}),h=p.fetchNextPage,_=p.isFetching;return(0,c.useEffect)((function(){t&&d((function(e){return[].concat((0,Q.Z)(e),[t])}))}),[]),(0,c.useEffect)((function(){a&&d((function(e){return[a].concat((0,Q.Z)(e))}))}),[a]),(0,v.jsxs)("div",{className:$,children:[u.map((function(e){return(0,v.jsx)(je,{comment:e},e._id)})),s>u.length?(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:re,onClick:function(){h()},children:["View more comments",_&&" Loading..."]})}):(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:re,onClick:function(){i.current.focus()},children:"Write a comment..."})})]})},Ze=s(5439),Ne=s(2579);var Ce=function(e){var t=e.showLikes,s=e.setShowLikes,n=e.postID,a=(0,c.useRef)(),o=(0,Ze.a)({queryKey:["getReacts",n],queryFn:function(){var e=(0,C.Z)((0,N.Z)().mark((function e(){var t,s;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.Z.get("".concat("http://127.0.0.1:4000","/api/v1/posts/").concat(n,"/reacts/"),{withCredentials:!0});case 2:return t=e.sent,s=t.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),refetchOnWindowFocus:!1}),l=o.isLoading,u=o.data,m=o.isFetching,p=l||m;return(0,_.Z)(a,t,(function(){s(!1)})),(0,v.jsx)(h.Z,{children:(0,v.jsx)("div",{className:"blur ".concat(i.Z.post_likes),children:(0,v.jsxs)(d.Z,{className:i.Z.post_likes_card,innerRef:a,children:[(0,v.jsxs)("div",{className:i.Z.pheader,children:[(0,v.jsx)("span",{children:"All"}),p&&(0,v.jsx)(Ne.Z,{circle:!0,height:25,width:25,containerClassName:"avatar-skeleton"}),!p&&(null===u||void 0===u?void 0:u.data.stats.types)&&Object.entries(null===u||void 0===u?void 0:u.data.stats.types).map((function(e){var t=(0,r.Z)(e,2),s=t[0],n=t[1];return(0,v.jsxs)("div",{className:i.Z.reacts_info_wrap,children:[(0,v.jsx)("img",{src:"../../../reacts/".concat(s,".svg"),alt:""}),(0,v.jsx)("p",{style:{color:"\n                    ".concat("like"===s?"#029afc":"love"===s?"#f63459":"haha"===s||"sad"===s||"wow"===s?"#f7b125":"angry"===s?"#e4605a":"","\n                ")},children:n.toString()})]},s)})),(0,v.jsx)("div",{className:"".concat(i.Z.exit," small_circle"),children:(0,v.jsx)("i",{onClick:function(){s((function(e){return!e}))},className:"exit_icon"})})]}),(0,v.jsxs)("div",{className:i.Z.content,children:[p&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"".concat(i.Z.react_user," ").concat(i.Z.react_user_wrap),style:{marginTop:"10px"},children:[(0,v.jsx)(Ne.Z,{circle:!0,height:40,width:40,containerClassName:"avatar-skeleton"}),(0,v.jsx)(Ne.Z,{width:150,height:15,style:{transform:"translateY(4px)"}})]}),(0,v.jsxs)("div",{className:"".concat(i.Z.react_user," ").concat(i.Z.react_user_wrap),children:[(0,v.jsx)(Ne.Z,{circle:!0,height:40,width:40,containerClassName:"avatar-skeleton"}),(0,v.jsx)(Ne.Z,{width:150,height:15,style:{transform:"translateY(4px)"}})]})]}),!p&&(null===u||void 0===u?void 0:u.data.reacts)&&(null===u||void 0===u?void 0:u.data.reacts.map((function(e,t){var s;return(0,v.jsxs)(B.rU,{to:"/profile/".concat(e.user.username),className:"".concat(i.Z.react_user," hover3"),children:[(0,v.jsxs)("div",{className:i.Z.react_user_wrap,children:[(0,v.jsx)("img",{className:i.Z.react_user_img,src:e.user.photo,alt:""}),(0,v.jsx)("img",{src:"../../../reacts/".concat(e.type,".svg"),alt:"",className:i.Z.react_icon})]}),(0,v.jsxs)("span",{children:[e.user.first_name," ",e.user.last_name,(null===(s=e.user)||void 0===s?void 0:s.confirmed)&&(0,v.jsx)("i",{style:{marginLeft:"5px",transform:"translateY(2px)"},className:"confirmed_comment_icon"})]})]},e._id)})))]})]})})})};var ye=function(e){var t,s,n,a,o=e.post,_=o.images.length,f=(0,c.useState)(0),x=(0,r.Z)(f,2),j=x[0],g=x[1],Z=(0,c.useState)(!1),N=(0,r.Z)(Z,2),C=N[0],y=N[1],w=(0,c.useRef)(),k=o.images,P=(0,c.useCallback)((function(e){g(e),y(!0)}),[]);return(0,c.useEffect)((function(){document.documentElement.style.overflow=C?"hidden":"auto"}),[C]),(0,v.jsxs)(d.Z,{className:i.Z.post,innerRef:w,style:{width:"100%"},children:[(0,v.jsxs)("div",{className:i.Z.body,children:["background"===o.type&&(0,v.jsx)("div",{className:i.Z.background,style:{backgroundImage:"url(".concat(m.h[o.background-1],")"),marginTop:0},children:o.text}),"normal"===o.type&&(0,v.jsx)("div",{className:i.Z.normal,style:{fontSize:"".concat(o.text.length>75?"15px":""),direction:"".concat((0,I.Z)(o.text)?"rtl":"ltr")},children:o.text}),"image"===o.type&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"".concat(i.Z.images_wrap," ").concat(2===_?i.Z.per2:3===_?i.Z.per3:4===_?i.Z.per4:5===_?i.Z.per5:""),style:{marginTop:0},children:o.images.map((function(e,t){return(0,v.jsx)("img",{onClick:function(){return P(t)},src:e,alt:t},t)}))})}),"profilePhoto"===o.type&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"".concat(i.Z.profilePhoto_wrap," "),style:{height:"370px"},children:[(0,v.jsx)("div",{className:i.Z.cover,style:{backgroundImage:"url(".concat(o.user.cover,")")}}),(0,v.jsx)("img",{onClick:function(){return P(0)},src:o.images[0],alt:o.text,style:{width:"280px"}})]})}),"cover"===o.type&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"".concat(i.Z.images_wrap," "),children:(0,v.jsx)("img",{onClick:function(){return P(0)},src:o.images[0],alt:o.text})})}),(0,v.jsxs)("div",{className:i.Z.header,style:{paddingBottom:"10px"},children:[(0,v.jsx)("div",{className:i.Z.left,children:(0,v.jsx)(B.rU,{to:"/profile/".concat(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.username),children:(0,v.jsx)("img",{src:o.user.photo,alt:"",style:{width:"35px"}})})}),(0,v.jsxs)("div",{className:i.Z.middle,children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)(B.rU,{to:"/profile/".concat(null===o||void 0===o||null===(s=o.user)||void 0===s?void 0:s.username),className:i.Z.username,children:["".concat(o.user.first_name," ").concat(o.user.last_name),(null===(n=o.user)||void 0===n?void 0:n.confirmed)&&(0,v.jsx)("i",{style:{marginLeft:"5px"},className:"confirmed_comment_icon"})]}),"profilePhoto"===o.type?(0,v.jsx)("span",{className:i.Z.profilePhotoText,children:"updated ".concat("male"===o.user.gender?"his":"her"," profile\n                picture")}):"cover"===o.type?(0,v.jsx)("span",{className:i.Z.profilePhotoText,children:"updated ".concat("male"===o.user.gender?"his":"her"," profile\n            cover")}):""]}),(0,v.jsxs)(B.rU,{className:i.Z.date,to:"/".concat(null===o||void 0===o||null===(a=o.user)||void 0===a?void 0:a.username,"/posts/").concat(null===o||void 0===o?void 0:o._id),children:[(0,v.jsx)(l(),{fromNow:!0,interval:30,children:o.createdAt}),(0,v.jsx)(u.Kj,{color:"#828387"})]})]}),(0,v.jsx)("div",{className:i.Z.right})]}),("image"===o.type||"profilePhoto"===o.type)&&(0,v.jsx)("div",{className:i.Z.normal,style:{fontSize:"".concat(o.text.length>40?"15px":""),direction:"".concat((0,I.Z)(o.text)?"rtl":"ltr")},children:o.text})]}),C&&(0,v.jsx)(h.Z,{children:(0,v.jsx)(p.Z,{src:k,currentIndex:j,disableScroll:!1,closeOnClickOutside:!0,onClose:function(){g(0),y(!1)}})})]})},we=s(6411),ke="CreateSharePost_wrap__+6-5N",Pe="CreateSharePost_card__xrKqV",Se="CreateSharePost_header__Zjacg",be="CreateSharePost_content__Z5dsm",Re="CreateSharePost_textarea_blue__1eWKp",De="CreateSharePost_btns__3Vieg";var Le=function(e){var t=e.showSharePost,s=e.setShowSharePost,n=e.post,a=e.setSharesCount,i=(0,c.useState)(""),o=(0,r.Z)(i,2),l=o[0],u=o[1],m=(0,c.useRef)(),p=(0,we.f)(),f=p.data,x=p.isLoading,j=p.isSuccess,g=p.mutate;return(0,_.Z)(m,t,(function(){s(!1)})),(0,c.useEffect)((function(){var e;j&&"success"===(null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.status)&&setTimeout((function(){s(!1),a((function(e){return e+1})),z.ZP.success("Successfully Shared!")}),300)}),[f,j]),(0,v.jsx)(h.Z,{children:(0,v.jsx)("div",{className:"".concat(ke," blur"),children:(0,v.jsxs)(d.Z,{className:Pe,innerRef:m,children:[(0,v.jsxs)("div",{className:Se,children:["Share Post",(0,v.jsx)("div",{className:"small_circle",onClick:function(){return s(!1)},children:(0,v.jsx)("i",{className:"exit_icon"})})]}),(0,v.jsx)("div",{className:be,children:(0,v.jsxs)(U.Z,{loading:x,children:[(0,v.jsx)("textarea",{style:{fontSize:"".concat(l&&l.length>75?"15px":""),direction:"".concat((0,I.Z)(l)?"rtl":"ltr")},placeholder:"Description",value:l,onChange:function(e){return u(e.target.value)},className:Re}),(0,v.jsx)(ye,{post:n}),(0,v.jsxs)("div",{className:De,children:[(0,v.jsx)("button",{className:"gray_btn",onClick:function(){return s(!1)},children:"Cancel"}),(0,v.jsx)("button",{className:"btn_blue",onClick:function(){return function(){var e=new FormData;e.append("type","share"),e.append("text",l),e.append("sharedID",n._id),g({data:Object.fromEntries(e),type:"share"})}()},children:"Share"})]})]})})]})})})};var Fe=function(e){var t=e.showMenu,s=e.setShowMenu,n=e.post,a=(e.user,e.postRef,e.setSharesCount),o=(0,c.useRef)(),l=(0,c.useState)(!1),u=(0,r.Z)(l,2),m=u[0],p=u[1];(0,_.Z)(o,t,(function(){m||s(!1)}));var h="".concat(window.location.origin,"/").concat(n.user.username,"/posts/").concat(n._id);return(0,v.jsxs)(d.Z,{className:i.Z.menu,innerRef:o,style:{padding:"10px"},children:[(0,v.jsxs)("ul",{children:[(0,v.jsx)(Y.CopyToClipboard,{text:h,onCopy:function(){z.ZP.success("Successfully Copied!"),s(!1)},children:(0,v.jsxs)("li",{className:"hover1",children:[(0,v.jsx)(W.$PT,{size:22}),(0,v.jsxs)("div",{className:i.Z.post_menu_text,children:[(0,v.jsx)("span",{children:"Copy post link"}),(0,v.jsx)("span",{className:i.Z.menu_post_col,children:"Copy post link to clipboard"})]})]})}),(0,v.jsx)("div",{className:"line"}),(0,v.jsx)("div",{onClick:function(){return p((function(e){return!e}))},children:(0,v.jsx)(H,{icon:"share_icon",title:"Share Post",subtitle:"Share post to your friends"})})]}),m&&(0,v.jsx)(Le,{showSharePost:m,setShowSharePost:p,post:n,setSharesCount:a})]})};var Te=function(e){var t,s,o,_,f=e.post,x=f.images.length,j=(0,c.useState)(),N=(0,r.Z)(j,2),C=N[0],y=N[1],w=(0,c.useState)(0),k=(0,r.Z)(w,2),P=k[0],S=k[1],b=(0,c.useState)(!1),R=(0,r.Z)(b,2),D=R[0],L=R[1],F=(0,c.useState)(!1),T=(0,r.Z)(F,2),M=T[0],K=T[1],U=(0,c.useState)(!1),z=(0,r.Z)(U,2),q=z[0],H=z[1],V=(0,c.useState)(!1),W=(0,r.Z)(V,2),Y=W[0],Q=W[1],J=(0,c.useState)(!1),$=(0,r.Z)(J,2),ee=$[0],te=$[1],se=(0,c.useState)(null),ne=(0,r.Z)(se,2),ae=ne[0],re=ne[1],ce=(0,c.useState)(null),ie=(0,r.Z)(ce,2),oe=ie[0],le=ie[1],ue=(0,c.useState)(null),de=(0,r.Z)(ue,2),me=de[0],pe=de[1],he=(0,c.useState)(null),_e=(0,r.Z)(he,2),fe=_e[0],xe=_e[1],ve=(0,c.useState)(null===f||void 0===f?void 0:f.commentsCount),je=(0,r.Z)(ve,2),Ze=je[0],Ne=je[1],we=(0,c.useState)(null===f||void 0===f?void 0:f.sharesCount),ke=(0,r.Z)(we,2),Pe=ke[0],Se=ke[1],be=(0,O.v9)((function(e){return(0,a.Z)({},e.user.userinfo)})),Re=(0,c.useRef)(),De=(0,c.useRef)(),Le=(0,c.useMemo)((function(){return e=(null===fe||void 0===fe?void 0:fe.types)||{},Object.keys(Object.keys(e).reduce((function(t,s){return e[s]>0&&(t[s]=e[s]),t}),{})).sort((function(t,s){return e[s]-e[t]})).slice(0,3);var e}),[null===fe||void 0===fe?void 0:fe.types]),Te=null===fe||void 0===fe?void 0:fe.isLiked,Ee=f.images,Me=function(e){clearTimeout(me),pe(setTimeout((function(){H(!0)}),800))},Ke=function(){clearTimeout(me),pe(setTimeout((function(){H(!1)}),800))},Ue=(0,Z.D)(ae,oe,{placement:"top-start",modifiers:[{name:"offset",options:{offset:[0,5]}}]}),Oe=Ue.styles,ze=Ue.attributes,Ae=(0,E.D)({mutationKey:"useReaction",mutationFn:G}),Ie=Ae.mutate,qe=Ae.data,He=Ae.isSuccess,Ve=Ae.isLoading;(0,c.useEffect)((function(){xe(f.reactions)}),[]),(0,c.useEffect)((function(){He&&xe(qe.data.reactions)}),[He,qe]);var We=(0,c.useCallback)((function(e){S(e),L(!0)}),[]);(0,c.useEffect)((function(){document.documentElement.style.overflow=D?"hidden":"auto"}),[D]);var Ye=function(e){Ke(),Ve||(xe((function(t){return(0,a.Z)((0,a.Z)({},t),{},{isLiked:t.isLiked===e?"":e,totalCount:t.totalCount+(""===t.isLiked?1:t.isLiked!==e?0:-1),types:(0,a.Z)((0,a.Z)({},t.types),{},(0,n.Z)({},e,(t.types[e]||0)+(""===t.isLiked?1:t.isLiked!==e?0:-1)))})})),Ie({type:e,post:f._id}))};return(0,v.jsxs)(d.Z,{className:i.Z.post,innerRef:Re,children:[(0,v.jsxs)("div",{className:i.Z.header,children:[(0,v.jsx)("div",{className:i.Z.left,children:(0,v.jsx)(B.rU,{to:"/profile/".concat(null===f||void 0===f||null===(t=f.user)||void 0===t?void 0:t.username),children:(0,v.jsx)("img",{src:f.user.photo,alt:""})})}),(0,v.jsxs)("div",{className:i.Z.middle,children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)(B.rU,{to:"/profile/".concat(null===f||void 0===f||null===(s=f.user)||void 0===s?void 0:s.username),className:i.Z.username,children:["".concat(f.user.first_name," ").concat(f.user.last_name),(null===f||void 0===f||null===(o=f.user)||void 0===o?void 0:o.confirmed)&&(0,v.jsx)("i",{style:{marginLeft:"5px",transform:"translateY(2px)"},className:"confirmed_comment_icon"})]}),"profilePhoto"===f.type?(0,v.jsx)("span",{className:i.Z.profilePhotoText,children:"updated ".concat("male"===f.user.gender?"his":"her"," profile\n                picture")}):"cover"===f.type?(0,v.jsx)("span",{className:i.Z.profilePhotoText,children:"updated ".concat("male"===f.user.gender?"his":"her"," profile\n            cover")}):"share"===f.type?(0,v.jsx)("span",{className:i.Z.profilePhotoText,children:"Shared post"}):""]}),(0,v.jsxs)(B.rU,{className:i.Z.date,to:"/".concat(null===f||void 0===f||null===(_=f.user)||void 0===_?void 0:_.username,"/posts/").concat(null===f||void 0===f?void 0:f._id),children:[(0,v.jsx)(l(),{fromNow:!0,interval:30,children:f.createdAt}),(0,v.jsx)(u.Kj,{color:"#828387"})]})]}),(0,v.jsxs)("div",{className:i.Z.right,children:[(0,v.jsx)("div",{onClick:function(){return Q((function(e){return!e}))},children:(0,v.jsx)(u.bb,{color:"#828387"})}),Y&&(0,v.jsx)(X,{user:be,showMenu:Y,setShowMenu:Q,post:f,postRef:Re})]})]}),(0,v.jsxs)("div",{className:i.Z.body,children:["background"===f.type&&(0,v.jsx)("div",{className:i.Z.background,style:{backgroundImage:"url(".concat(m.h[f.background-1],")"),direction:"".concat((0,I.Z)(f.text)?"rtl":"ltr")},children:f.text}),"normal"===f.type&&(0,v.jsx)("div",{className:i.Z.normal,style:{fontSize:"".concat(f.text.length>75?"15px":""),direction:"".concat((0,I.Z)(f.text)?"rtl":"ltr")},children:f.text}),"image"===f.type&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{style:{direction:"".concat((0,I.Z)(f.text)?"rtl":"ltr")},className:i.Z.normal,children:f.text}),(0,v.jsx)("div",{className:"".concat(i.Z.images_wrap," ").concat(2===x?i.Z.per2:3===x?i.Z.per3:4===x?i.Z.per4:5===x?i.Z.per5:i.Z.per1),children:f.images.map((function(e,t){return(0,v.jsx)("img",{onClick:function(){return We(t)},src:e,alt:t},t)}))})]}),"profilePhoto"===f.type&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:i.Z.normal,style:{direction:"".concat((0,I.Z)(f.text)?"rtl":"ltr")},children:f.text}),(0,v.jsxs)("div",{className:"".concat(i.Z.profilePhoto_wrap," "),children:[(0,v.jsx)("div",{className:i.Z.cover,style:{backgroundImage:"url(".concat(f.user.cover,")")}}),(0,v.jsx)("img",{onClick:function(){return We(0)},src:f.images[0],alt:f.text})]})]}),"cover"===f.type&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"".concat(i.Z.images_wrap," "),children:(0,v.jsx)("img",{onClick:function(){return We(0)},src:f.images[0],alt:f.text})})}),"share"===f.type&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:i.Z.normal,style:{fontSize:"".concat(String(f.text).length>20?"15px":""),direction:"".concat((0,I.Z)(f.text)?"rtl":"ltr")},children:f.text}),(0,v.jsx)("div",{className:i.Z.share,children:(0,v.jsx)(ye,{post:f.sharedID})})]})]}),(0,v.jsxs)("div",{className:i.Z.footer,children:[(0,v.jsxs)("div",{className:i.Z.infos,children:[(0,v.jsxs)("div",{className:i.Z.left,onClick:function(){return K((function(e){return!e}))},children:[(0,v.jsx)("div",{className:i.Z.reacts_view,children:Le.map((function(e,t){return(0,v.jsx)("img",{src:"../../../reacts/".concat(e,".svg"),alt:""},t)}))}),(0,v.jsx)("span",{children:(null===fe||void 0===fe?void 0:fe.totalCount)>0&&(null===fe||void 0===fe?void 0:fe.totalCount)})]}),(0,v.jsxs)("div",{className:i.Z.right,children:[(0,v.jsxs)("span",{children:[Ze," comments"]}),(0,v.jsxs)("span",{children:[Pe," shares"]})]})]}),(0,v.jsxs)("div",{className:i.Z.actions,children:[q&&(0,v.jsx)(h.Z,{id:"reactPopper",children:(0,v.jsx)("div",(0,a.Z)((0,a.Z)({ref:le,style:Oe.popper},ze.popper),{},{children:(0,v.jsx)(g,{reactHandler:Ye,handleMouseEnter:Me,handleMouseLeave:Ke,setShowReact:H,showReact:q})}))}),(0,v.jsxs)("div",{className:"".concat(i.Z.action_elment," hover1"),id:"reactPopper",ref:re,onMouseEnter:Me,onMouseLeave:Ke,onClick:function(){Ke(),Ye(Te||"like")},onTouchStart:Me,children:[Te?(0,v.jsx)("img",{src:"../../../reacts/".concat(Te,".svg"),alt:"",className:"small_react",style:{width:"18px"}}):(0,v.jsx)("i",{className:"like_icon"}),(0,v.jsx)("span",{style:{color:"\n                    ".concat("like"===Te?"#029afc":"love"===Te?"#f63459":"haha"===Te||"sad"===Te||"wow"===Te?"#f7b125":"angry"===Te?"#e4605a":"","\n                ")},children:Te||"Like"})]}),(0,v.jsxs)("div",{className:"".concat(i.Z.action_elment," hover1"),onClick:function(){De.current.focus()},children:[(0,v.jsx)("i",{className:"comment_icon"}),(0,v.jsx)("span",{children:"Comment"})]}),"share"===f.type?"":(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"".concat(i.Z.action_elment," hover1"),onClick:function(){return te((function(e){return!e}))},children:[(0,v.jsx)("i",{className:"share_icon"}),(0,v.jsx)("span",{children:"Share"})]}),ee&&(0,v.jsx)(Fe,{user:be,showMenu:ee,setShowMenu:te,post:f,postRef:Re,setSharesCount:Se})]})]})]}),(0,v.jsx)("div",{className:i.Z.create_comment,children:(0,v.jsx)(A,{commentCountHandler:function(e){Ne(e)},commentRef:De,setLastCommentData:y,post:f._id,placholdertxt:"Write a comment ..."})}),(0,v.jsx)(ge,{lastComment:null===f||void 0===f?void 0:f.lastComment[0],commentsCount:null===f||void 0===f?void 0:f.commentsCount,postID:f._id,lastCommentData:C,user:be,commentRef:De}),D&&(0,v.jsx)(h.Z,{children:(0,v.jsx)(p.Z,{src:Ee,currentIndex:P,disableScroll:!1,closeOnClickOutside:!0,onClose:function(){S(0),L(!1)}})}),M&&(0,v.jsx)(Ce,{postID:f._id,showLikes:M,setShowLikes:K})]})}},7237:function(e,t,s){s(2791);var n=s(2951),a=s(3466),r=s(2579),c=s(184);t.Z=function(){return(0,c.jsxs)(a.Z,{className:n.Z.post,children:[(0,c.jsxs)("div",{className:n.Z.header,children:[(0,c.jsx)("div",{className:n.Z.left,children:(0,c.jsx)(r.Z,{circle:!0,height:40,width:40,containerClassName:"avatar-skeleton"})}),(0,c.jsxs)("div",{className:n.Z.middle,children:[(0,c.jsx)(r.Z,{width:150,height:15,style:{transform:"translateY(4px)"}}),(0,c.jsx)(r.Z,{width:80,height:8})]})]}),(0,c.jsxs)("div",{className:n.Z.body,style:{padding:"10px"},children:[(0,c.jsx)(r.Z,{count:3,height:18,width:"100%"}),(0,c.jsx)(r.Z,{count:2,height:10,width:"100%"})]})]})}},2951:function(e,t){t.Z={post:"Post_post__GdSp-",header:"Post_header__BpXq1",left:"Post_left__taoea",middle:"Post_middle__4C0bU",username:"Post_username__Ze2hA",date:"Post_date__Z2ukC",right:"Post_right__zOQci",background:"Post_background__+h3Ns",normal:"Post_normal__VVXnW",images_wrap:"Post_images_wrap__7gmYJ",per1:"Post_per1__sGBUE",per2:"Post_per2__LVWHg",per3:"Post_per3__9kp9e",per4:"Post_per4__PgPwP",per5:"Post_per5__wcD+b",footer:"Post_footer__z2WVn",infos:"Post_infos__uoUDK",actions:"Post_actions__rz2nu",action_elment:"Post_action_elment__Uq8VP",menu:"Post_menu__Xpn6o",post_menu_text:"Post_post_menu_text__TatO2",menu_post_col:"Post_menu_post_col__2Xmew",profilePhotoText:"Post_profilePhotoText__OKx8D",profilePhoto_wrap:"Post_profilePhoto_wrap__qG6T5",cover:"Post_cover__dLL1p",reacts_view:"Post_reacts_view__wDpjy",create_comment:"Post_create_comment__41U81",post_likes:"Post_post_likes__v7CVF",post_likes_card:"Post_post_likes_card__k0RbF",pheader:"Post_pheader__AMP87",exit:"Post_exit__65A+d",react_user:"Post_react_user__7ysyJ",react_user_img:"Post_react_user_img__9Ts8E",react_user_wrap:"Post_react_user_wrap__HWoFD",react_icon:"Post_react_icon__s8FOw",reacts_info_wrap:"Post_reacts_info_wrap__ScX3V",share:"Post_share__dvDB5",share_content:"Post_share_content__Bjyi0",post_body:"Post_post_body__eM+pR",createPost_icon:"Post_createPost_icon__21WAi"}}}]);
//# sourceMappingURL=178.7271c36a.chunk.js.map